<!DOCTYPE html>
<html lang="en">
<body>
<nav class="navbar navbar-top navbar-expand navbar-dark">
    <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            <!-- Navbar links -->
            <ul class="navbar-nav align-items-center  ml-md-auto ">
                <li class="nav-item d-xl-none">
                    <!-- Sidenav toggler -->
                    <div class="pr-3 sidenav-toggler sidenav-toggler-dark" data-action="sidenav-pin"
                        data-target="#sidenav-main">
                        <div class="sidenav-toggler-inner">
                            <i class="sidenav-toggler-line"></i>
                            <i class="sidenav-toggler-line"></i>
                            <i class="sidenav-toggler-line"></i>
                        </div>
                    </div>
                </li>
                <li class="nav-item d-sm-none">
                    <a class="nav-link" href="#" data-action="search-show" data-target="#navbar-search-main">
                        <i class="ni ni-zoom-split-in"></i>
                    </a>
                </li>
            </ul>


            <ul class="navbar-nav align-items-center  ml-auto ml-md-0 flag-ul ">
                <li>
                    <select class="form-control select2 store" name="store" id="store" dir="">
                        <option disabled value> -- Select Store -- </option>
                        <option value="0">All stores</option>
                        <option value="1" selected>T-NAGAR</option>
                        <option value="2">PERUMBAKKAM</option>
                        <option value="3">PONDICHERRY</option>
                        <option value="4">ALAPAKKAM</option>
                        <option value="5">IYYAPPANTHANGAL</option>
                        <option value="6">SALIGRAMAM</option>
                        <option value="7">PADUR</option>
                        <option value="8">ANNANAGAR 6th AVENUE</option>
                        <option value="9">ecity</option>
                    </select>
                </li>
                <li class="nav-item dropdown rtl-flag">
                    <div class="dropdown-menu  dropdown-menu-right dropdown-menu-flag ">
                        <div class="dropdown-header noti-title">
                            <h6 class="text-overflow m-0">Language</h6>
                        </div>
                        <a href="language/English" class="dropdown-item">
                            <span class="avatar avatar-sm">
                                <img class="small_round flag" src="public/storage/images/language/English.jpg">
                            </span>
                            <span>English</span>
                        </a>
                        <a href="language/Arabic" class="dropdown-item">
                            <span class="avatar avatar-sm">
                                <img class="small_round flag" src="public/storage/images/language/Arabic.jpg">
                            </span>
                            <span>Arabic</span>
                        </a>
                    </div>
                </li>
            </ul>

            <ul class="navbar-nav align-items-center  ml-auto ml-md-0 ">
                <li class="nav-item dropdown">
                    <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false">
                        <div class="media align-items-center">
                            <span class="avatar avatar-sm rounded-circle rtl-avatar">
                                <img class="small_round" src="public/storage/images/users/admin_1602138472.jpg">
                            </span>
                            <div class="media-body  ml-2  d-none d-lg-block">
                                <span class="mb-0 text-sm  font-weight-bold" id="username"> Super Admin </span>
                            </div>
                        </div>
                    </a>
                    <div class="dropdown-menu  dropdown-menu-right ">
                        <div class="dropdown-header noti-title">
                            <h6 class="text-overflow m-0">Welcome!</h6>
                        </div>

                        <a href="work-in-progress-owner.html" class="dropdown-item">
                            <i class="ni ni-single-02"></i>
                            <span>My profile</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="work-in-progress-owner.html" class="dropdown-item">
                                            <i class="ni ni-scissors"></i>My Salon</a>
                        <div class="dropdown-divider"></div>
                        <a onclick="logout(event)" class="dropdown-item">
                            <i class="ni ni-user-run"></i>
                            <span>Logout</span>
                        </a>
                        <form action="logout" id="logout-form" method="POST"
                          style="display: none;"></form>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>
</body>
<script>
    $(document).ready(function () {
        var storedUsername = localStorage.getItem("username");
        var storedPassword = localStorage.getItem("password");
        if (storedUsername && storedPassword) {
            $("#username").text(storedUsername);
        } else {
            window.location.href = "index.html";
        }
    });

    function logout(event) {
                console.log("logout start")
                event.preventDefault();
                authHeader = null;
                localStorage.removeItem("username"); // Clear stored credentials from localStorage
                localStorage.removeItem("password");
                localStorage.removeItem("bearerToken");
                localStorage.removeItem("selectedStore");
                document.getElementById('logout-form').submit();
                window.location.href = "index.html";
            }
     // Get a reference to the select element
     var storeSelect = document.getElementById("store");

// Add an event listener to the select element
storeSelect.addEventListener("change", function() {
    // Get the selected option element
    var selectedOption = storeSelect.options[storeSelect.selectedIndex];
    
    // Get the value and text of the selected option
    var selectedValue = selectedOption.value;
    var selectedText = selectedOption.text;
    
    // Create an object to store the selected option details
    var selectedStore = {
        value: selectedValue,
        text: selectedText
    };
    
    // Convert the object to JSON and store it in local storage
    console.log(selectedStore.text);
    localStorage.setItem("selectedStore", JSON.stringify(selectedStore));
});

// Check if there's a previously selected store and update the dropdown accordingly
var storedStore = localStorage.getItem("selectedStore");
if (storedStore) {
    var parsedStore = JSON.parse(storedStore);
    storeSelect.value = parsedStore.value;
}
</script>
</html>